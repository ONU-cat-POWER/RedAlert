<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>game</title>
	<script src="jq.js"></script>
</head>
<style>
	.area {
		position: relative;
		background: #4C1B46;
		height: 760px;
		
	}
	.balls {
		height: 760px;
	}
	.balls div {
		top:50%;
		left: 50%;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		background: #f35323;
		cursor: pointer;
		position: absolute;
		z-index: 1;
		opacity: 0;
	}
	.score {
		position: absolute;
		right: 20px;
		top: 20px;
		width: 100px;
		height: 60px;
		border: 1px solid #000;
		margin: 10px;

	}
	p {
		margin: 0;

	}
	img.scary {
		position: absolute;
		width: 99%;
		display: none;
		z-index: 4;

	}
</style>
<body>
	<audio id="scream" src="PAIN.mp3"></audio>
	<img class="scary"src="scary.jpg" alt="">
	<div class="area">
		<div class="balls">
			<div class="ball1"></div>
			<div class="ball2"></div>
			<div class="ball3"></div>
			<div class="ball4"></div>
			<div class="ball5"></div>
			<div class="ball6"></div>
			<div class="ball7"></div>
			<div class="ball8"></div>
			<div class="ball9"></div>
			<div class="ball10"></div>
			<div class="ball11"></div>
			<div class="ball12"></div>
			<div class="ball13"></div>
			<div class="ball14"></div>
			<div class="ball15"></div>
			<div class="ball16"></div>
			<div class="ball17"></div>
			<div class="ball18"></div>
			<div class="ball19"></div>
			<div class="ball20"></div>
			<div class="ball21"></div>
			<div class="ball22"></div>
			<div class="ball23"></div>
			<div class="ball24"></div>
			<div class="ball25"></div>
			<div class="ball26"></div>
			<div class="ball27"></div>
			<div class="ball28"></div>
			<div class="ball29"></div>
			<div class="ball30"></div>
		</div>
	</div>
	<div class="score">
		<p id="time"></p>
		<p id="remains"></p>
		<p id="goal"></p>
	</div>
	
	<script>
		 $(document).ready(function(){
			var time=0;
			setInterval(function(){
				$("#time").html("time: "+Math.floor(time++/10));
				$(".balls").children().each(function(){
					var a=Math.floor((Math.random()*256));
					var b=Math.floor((Math.random()*256));
					var c=Math.floor((Math.random()*256));
					$(this).css({
						"background": "rgb("+a+","+b+","+c+")" 
					});

				});
			},80);
			var bgcolor = 0;
			setInterval(function(){
				bgcolor = Math.min(255, bgcolor += 2)
				//console.log($(".area").css("backgroundColor"))
				var rgb=$(".area").css("backgroundColor")
				rgb=rgb.substring(4,rgb.length-1);
				var r=+rgb.split(", ")[0];
				var g=+rgb.split(", ")[1];
				var b=+rgb.split(", ")[2];
				console.log(r+" "+g+" "+b)
				$(".score").css({
					backgroundColor: "rgb("+(r+1)+","+(g+1)+","+(b+1)+")" 
				});
				$(".area").css({
					backgroundColor: "rgb("+(r+1)+","+(g+1)+","+(b+1)+")" 
				});
				$(".balls div").css({
					opacity: ""+(bgcolor-50)/(255-50)
				});
			},1);
			$(".balls").children().each(function(){
				var a=Math.floor((Math.random()*256));
				var b=Math.floor((Math.random()*256));
				var c=Math.floor((Math.random()*256));
				$(this).css({
					"background": "rgb("+a+","+b+","+c+")" 
				});
				var mt=Math.floor((Math.random()*95));
				var ml=Math.floor((Math.random()*95));
				mt+="%";
				ml+="%";
				$(this).animate({
					top: mt,
					left: ml
				},1000);
				return $(this).click(function(){
					$(".balls").children().each(function(){

						$("#remains").html("remains: "+($(".balls").children().length-1));
						$("#goal").html("removed: "+(31-$(".balls").children().length));
						if($(".balls").children().length == 1 ){
							alert("Game Over"+" SCORE:"+time);
						}
						if($(".balls").children().length == 2 ){
							$(".scary").show();
							var audio = $("body").find('audio').get(0);
							console.log(audio.play());

						}
						var mt=Math.floor((Math.random()*95));
						var ml=Math.floor((Math.random()*95));
							mt+="%";
							ml+="%";
							wd=$(this).width()-1;
							he=$(this).height()-1;
							wd+="px";
							he+="px";
							$(this).animate({
								top: mt,
								left: ml,
								width: wd,
								height: he 
							},300);
						});


					console.log($(this).remove());
				});
			});
/*
			$("body").mousemove(function(){
				var x=event.pageX;
				var y=event.pageY;
				$(".balls").children().each(function(){
					var bx=$(this).position().left;
					var by=$(this).position().top;
					//console.log(x+" "+y+" "+bx+" "+by);
					var dx=Math.abs(bx-x);
					var dy=Math.abs(by-y);
					if(dx<40 && dy<40){
						var mt=Math.floor((Math.random()*100)+1);
						var ml=Math.floor((Math.random()*100)+1);
						mt+="%";
						ml+="%";
						$(this).animate({
							top: mt,
							left: ml
						},1000);
					}
					return $(this).click(function(){
						console.log($(this).remove());

					});
					

				});
				
			});*/
			
			
		});
	</script>
</body>
</html>